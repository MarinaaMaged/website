<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fitness Tracker</title>
    <link rel="stylesheet" href="live.css"/>
    <!-- <link rel="icon" href="favicon.ico"/>  -->
</head>
<body>
    <header class="header"> 
        <nav class="navbar"> 
            <a href="home.html">Home</a>
            <a href="dashboard.html">Dashboard</a>
            <a href="workout.html">Workout</a>
            <a href="live.html">Live Coach</a>
            <a href="profile.html">Profile</a>
        </nav>
        <div class="auth-buttons"></div>
        <a href="index.html"><button class="log-out">Log out</button></a>
        </div>
    </header>
    <div class="container">
        <div class="row">
            <div class="cv">
                <h1> Reps Workout with personal AI Trainer</h1>
                <div>
                    <button class="start" id="start-btn">Start!</button>
                    <button class="finish" id="finish-btn" style="display:none;">Finish!</button>
                </div>
                <img id="live-video" src="" width="100%" style="display:none;"/>
            </div>
        </div>
    </div>
    <footer>
        <div class="footer-bottom">
            <p>&copy; FITNESS | BY RAM </p>
        </div>
    </footer>

    <script>
        const startBtn = document.getElementById('start-btn');
        const finishBtn = document.getElementById('finish-btn');
        const liveVideo = document.getElementById('live-video');

        startBtn.addEventListener('click', () => {
            fetch('/start_stream')
                .then(response => {
                    if (response.ok) {
                        liveVideo.src = "http://127.0.0.1:5000/video";
                        liveVideo.style.display = 'block';
                        startBtn.style.display = 'none';
                        finishBtn.style.display = 'inline';
                    } else {
                        alert('Error starting the video stream');
                    }
                });
        });

        finishBtn.addEventListener('click', () => {
            fetch('/stop_stream')
                .then(response => {
                    if (response.ok) {
                        liveVideo.style.display = 'none';
                        startBtn.style.display = 'inline';
                        finishBtn.style.display = 'none';
                    } else {
                        alert('Error stopping the video stream');
                    }
                });
        });
    </script>
</body>
</html>
